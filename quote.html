<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dark Academia Daily Quote V3</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Playfair+Display:ital,wght@1,400;1,700&display=swap" rel="stylesheet">
    <style>
        body {
            background-color: transparent; /* 透明背景 */
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
            color: #C5A059; /* 消光金 */
            font-family: 'Cinzel', serif;
        }

        .quote-container {
            text-align: center;
            padding: 40px 30px; /* 調整內距 */
            max-width: 80%;
            width: 500px;
            border: 2px solid #C5A059; /* 金色邊框 */
            background-color: rgba(25, 25, 25, 0.95); /* 深色半透明底 */
            box-shadow: 0 15px 40px rgba(0,0,0,0.6); /* 更深的陰影 */
            position: relative;
            border-radius: 4px; /* 輕微圓角 */
        }

        /* 已移除引號的 CSS 部分 (.quote-container::before) */

        .quote-text {
            font-family: 'Playfair Display', serif;
            font-style: italic;
            font-size: 1.5rem;
            line-height: 1.5;
            margin-bottom: 25px;
            letter-spacing: 0.5px;
            min-height: 80px; /* 預留高度 */
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* 載入中的呼吸動畫 */
        .quote-text.loading {
            animation: pulse 1.5s infinite ease-in-out;
            font-size: 1.2rem;
            opacity: 0.8;
        }
        @keyframes pulse {
            0% { opacity: 0.5; }
            50% { opacity: 1; }
            100% { opacity: 0.5; }
        }

        .quote-author {
            font-size: 0.9rem;
            letter-spacing: 2px;
            text-transform: uppercase;
            opacity: 0.8;
            font-weight: 700;
        }
    </style>
</head>
<body>

    <div class="quote-container">
        <div class="quote-text loading" id="quote">Finding the perfect words...</div>
        <div class="quote-author" id="author"></div>
    </div>

    <script>
        const quoteEl = document.getElementById('quote');
        const authorEl = document.getElementById('author');

        async function getQuote() {
            const today = new Date().toDateString();
            const savedDate = localStorage.getItem('quoteDate');
            const savedQuote = localStorage.getItem('dailyQuote');
            const savedAuthor = localStorage.getItem('dailyAuthor');

            // 如果日期沒變，直接讀取儲存的名言
            if (savedDate === today && savedQuote) {
                displayQuote(savedQuote, savedAuthor);
                return;
            }

            // 如果跨日了，抓取新的名言
            try {
                // 更換為更穩定的 API
                const response = await fetch('https://api.quotable.io/random?maxLength=100');
                const data = await response.json();
                
                const text = data.content;
                const author = data.author;

                displayQuote(text, author);

                // 儲存到本地
                localStorage.setItem('quoteDate', today);
                localStorage.setItem('dailyQuote', text);
                localStorage.setItem('dailyAuthor', author);
            } catch (error) {
                // 如果 API 還是失敗，顯示這句備用名言
                displayQuote("Wisdom begins in wonder.", "Socrates");
            }
        }

        function displayQuote(text, author) {
            quoteEl.innerText = text;
            authorEl.innerText = "— " + author;
            quoteEl.classList.remove('loading'); // 移除載入動畫
        }

        // 延遲 0.5 秒執行，讓你看到漂亮的載入動畫
        setTimeout(getQuote, 500);
    </script>
</body>
</html>